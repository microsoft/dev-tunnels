pool:
  name: Azure Pipelines

# Publish only if changes to csharp directory are committed to main.
trigger:
  branches:
    include:
    - main
  paths:
    include:
    - csharp

steps:
- template: csharp-build-steps.yaml

- task: Npm@1
  displayName: 'Publish packages to internal feed'
  inputs:
    command: custom
    workingDir: csharp
    verbose: false
    customCommand: 'run publish'